#!/bin/sh

set -e

git_rebase_onto() {
  previous_branch="$(git branch --show-current)"
  (
    set -x
    g rebase --onto "$@"
    g switch "$previous_branch" 2> /dev/null
    g reset --hard 'HEAD@{1}'
  )
}

git_rebase_onto "$@"
